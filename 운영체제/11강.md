# <strong>명령어 사이클과 인터럽트</strong>
- CPU가 메모리에 저장되어 있는 데이터를 실행하는 과정에는 일정한 주기(패턴)가 존재
- 이러한 정해진 주기를 방해하는 신호를 인터럽트라고 부름 
<img width="609" alt="image" src="https://user-images.githubusercontent.com/99342700/227757424-fb98abe1-939d-44f7-b309-f8578fef9409.png">

### <strong>명령어 사이클</strong>
- 프로그램 속 명령어들은 일정한 주기가 반복되며 실행하는 것
- 메모리에 저장된 명령어를 실행하려면?
    - 인출 -> 실행 -> 인출 -> 실행 . . . (반복)
    - 인출 사이클 : 가장 먼저 메모리에서 CPU로 갖고 와야함
    - 실행 사이클 : 가져온 정보를 실행
- CPU로 명령어를 가져와도 바로 실행이 불가능한 경우 존재
<img width="896" alt="image" src="https://user-images.githubusercontent.com/99342700/227758266-6c77395e-c7b0-4a31-b9f0-c3232843c4aa.png">

- 어떤 명령어는 인출과 실행 사이클로만 실행
- 어떤 명령어른 인출과 간접, 실행 사이클을 거쳐 실행
<img width="527" alt="image" src="https://user-images.githubusercontent.com/99342700/227758323-84669fc9-0d83-47ef-8502-33be18da2b14.png">

### <strong>인터럽트</strong>
- "CPU가 꼭 주목해야 할 때", "CPU가 얼른 처리해야 할 다른 작업이 생겼을 때" 발생
- "강대리, 이거 급한 거니까 지금 하던 일 멈추고 이것부터 처리해주게"
- 인터럽트의 종류
    - "예외"와 "하드웨어 인터럽트"가 있음
    - 동기 인터럽트(예외) -> 추후 운영체제에서 자세한 내용 다룸
        - CPU가 예기치 못한 상황을 접했을 때 발생
        - 예외적인 상황이 생기면 현재 실행 중단시킨 후 우선 처리
        - ex) 디버깅, 실행할 수 없는 명령어 존재 . . . 
        - 동기 인터럽트의 종류 : 폴트, 트랩, 중단, 소프트웨어 인터럽트
    - 비동기 인터럽트(하드웨어 인터럽트)
        - 주로 입출력장치에 의해 발생
        - 알림(세탁기 완료, 전자레인지 조리 완료)과 같은 역할
        - 그 외에 키보드, 마우스 등등의 입력의 알림도 처리 가능
        - 입출력 작업 도중에도 효율적으로 명령어를 처리하기 위해 하드웨어 인터럽트 사용
        - 입출력 작업 도중에도 효율적으로 명령어를 처리하기 위해 하드웨어 인터럽트 사용
        - 입출력장치는 CPU에 비해 느림
        - 인터럽트가 없다면 CPU는 프린트 완료 여부를 확인하기 위해 주기적으로 확인
        - 인터럽트가 있다면 입출력 작업 동안 CPU는 다른 일 가능
        - 하드웨어 인터럽트의 처리 순서
            - 인터럽트의 종류를 막론하고 인터럽트 처리 순서는 대동소이하다
            1. 입출력 장치는 CPU에 인터럽트 요청 신호를 보냄
            2. CPU는 실행 사이클이 끝나고 명령어를 인출하기 전 항상 인터럽트 여부를 확인
            3. CPU는 인터럽트 요청을 확인하고 인터럽트 플래그를 통해 현재 인터럽트를 받아들일 수 있는지 여부 확인
            4. 인터럽트를 받아들일 수 있다면 CPU는 지금까찌의 작업을 백업
            5. CPU는 인터럽트 벡터를 참조하여 인터럽트 서비스 루틴을 실행
            6. 인터럽트 서비스 루틴 실행이 끝나면 (4)에서 백업해 둔 작업을 복구하여 실행 재개
        - 인터럽트 용어
            - 인터럽트 요청 신호
                - 하드웨어 입출력장치가 CPU에게 지금 실행 가능한지 요청
            - 인터럽트 플래그
                - 요청신호를 받으면 가능 여부를 결정하는 비트
            - 인터럽트 벡터
                - 각각의 인터럽트를 구분하기 위한 정보
                - CPU가 인터럽트의 시작 주소가 어디인지 구분하기 위한 정보
            - 인터럽트 서비스 루틴
                - 인터럽트를 처리하는 프로그램
                - CPU가 인터럽트를 받아들이기로 했으면 실행 됨
                - 인터럽트가 발생했을 때 해당 인터럽트를 어떻게 처리하기 위한 프로그램
                - "키보드가 안티럽트 요청을 보내면 이렇게 행동한다"
                - 인터럽트 서비스 루틴도 프로그램이기에 메모리에 저장
            <img width="690" alt="image" src="https://user-images.githubusercontent.com/99342700/227760657-aeafd017-b307-41b7-b74f-8e16db0e5a48.png"> 
        - "CPU가 인터럽트를 처리한다"의 의미
            - "인터럽트 서비스 루틴을 실행하고, 본래 수행하던 작업으로 다시 되돌아온다"
            - 인터럽트의 시작 주소는 인터럽트 벡터를 통해 알 수 있다
<img width="796" alt="image" src="https://user-images.githubusercontent.com/99342700/227761587-1cce836c-7f26-436e-80d6-cd089068a495.png">  